name: Validate code

on: [push, pull_request]

jobs:
  validate:
    name: Validate code
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Check for priority todos
      run: '! grep -r "todo[0-9]" --exclude-dir=workflows .'
      if: always()
    - name: Check for non-todo skip()s in tests
      run: '! grep -r "skip(" --exclude-dir=workflows tests/ | grep -v "todo"'
      if: always()
